<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz - Menongue Educa</title>

<style>
body{
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
    text-align:center;
    padding:20px;
}

.container{
    max-width:700px;
    margin:auto;
    background:rgba(0,0,0,0.5);
    padding:20px;
    border-radius:10px;
}

button{
    padding:10px 15px;
    margin:5px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}

.opcao{
    display:block;
    width:100%;
    margin:8px 0;
    background:#3498db;
    color:white;
}

.opcao:hover{
    background:#2980b9;
}

#timer{
    font-size:18px;
    margin:10px 0;
}

.medalha{
    font-size:40px;
}

#ranking{
    margin-top:20px;
    text-align:left;
}
</style>
</head>
<body>

<div class="container">

<h1>ğŸ“š Quiz Menongue Educa</h1>

<div id="controls">
    <select id="classe">
        <option value="" disabled selected>Selecione a Classe</option>
        <option value="1">1Âª Classe</option>
        <option value="2">2Âª Classe</option>
        <option value="3">3Âª Classe</option>
        <option value="4">4Âª Classe</option>
        <option value="5">5Âª Classe</option>
        <option value="6">6Âª Classe</option>
    </select>

    <button id="btnIniciar">Iniciar Quiz</button>
</div>

<div id="quiz" style="display:none;">
    <div id="timer"></div>
    <div id="progresso"></div>
    <h3 id="pergunta"></h3>
    <div id="opcoes"></div>
</div>

<div id="resultado"></div>

<div id="ranking"></div>

</div>

<script src="bancoPerguntas.js"></script>
<script src="sistemaQuiz.js"></script>

<script>

const classeSelect = document.getElementById('classe');
const btnIniciar = document.getElementById('btnIniciar');
const quizDiv = document.getElementById('quiz');
const controls = document.getElementById('controls');
const timerDiv = document.getElementById('timer');
const resultadoDiv = document.getElementById('resultado');
const rankingDiv = document.getElementById('ranking');

let tempo;
let tempoRestante = 15;

btnIniciar.addEventListener('click', () => {
    const classe = classeSelect.value;

    if(!classe){
        alert("Selecione a classe.");
        return;
    }

    iniciarQuizCompleto(classe);
});

function iniciarQuizCompleto(classe){
    resultadoDiv.innerHTML="";
    controls.style.display="none";
    quizDiv.style.display="block";

    gerarQuiz(classe,"matematica");
    iniciarTimer();
}

function iniciarTimer(){
    tempoRestante = 15;
    timerDiv.innerHTML = "â³ Tempo: " + tempoRestante + "s";

    tempo = setInterval(()=>{
        tempoRestante--;
        timerDiv.innerHTML = "â³ Tempo: " + tempoRestante + "s";

        if(tempoRestante <=0){
            clearInterval(tempo);
            proximaPergunta();
            iniciarTimer();
        }

    },1000);
}

function pararTimer(){
    clearInterval(tempo);
}

function finalizarQuiz(pontos){
    pararTimer();
    quizDiv.style.display="none";

    let medalha="";
    if(pontos >=8) medalha="ğŸ¥‡ Ouro";
    else if(pontos >=6) medalha="ğŸ¥ˆ Prata";
    else medalha="ğŸ¥‰ Bronze";

    resultadoDiv.innerHTML = `
        <h2>Resultado Final</h2>
        <p>PontuaÃ§Ã£o: ${pontos}/10</p>
        <div class="medalha">${medalha}</div>
        <button onclick="location.reload()">Jogar Novamente</button>
    `;

    salvarRanking(pontos);
    mostrarRanking();
}

function salvarRanking(pontos){
    let ranking = JSON.parse(localStorage.getItem("rankingQuiz")) || [];
    ranking.push(pontos);
    ranking.sort((a,b)=>b-a);
    ranking = ranking.slice(0,5);
    localStorage.setItem("rankingQuiz", JSON.stringify(ranking));
}

function mostrarRanking(){
    let ranking = JSON.parse(localStorage.getItem("rankingQuiz")) || [];
    let html="<h3>ğŸ† Ranking Top 5</h3><ol>";

    ranking.forEach(p=>{
        html+=`<li>${p} pontos</li>`;
    });

    html+="</ol>";
    rankingDiv.innerHTML=html;
}

</script>

</body>
</html>
